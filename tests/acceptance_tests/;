When(/^I make multisig deposit (\d+) (\w+) from (\w+) to (\d+) of (\[.*\])$/) do |amount, symbol, from, req, addrs|
    addr_name_list = JSON.parse(addrs.gsub(/(\w+)/, '"\1"'))
    addr_list = []
    for name in addr_name_list
        addr_list << @addresses[name]
    end
    @current_actor.node.exec 'wallet_multisig_deposit', to_f(amount), symbol, get_actor(from).account, req, addr_list
end

When(/^I save multisig ID for (\d+) of (\[.*\]) as (\w+)$/) do |req, addrs, name|
    addr_name_list = JSON.parse(addrs.gsub(/(\w+)/, '"\1"'))
    addr_list = []
    for name in addr_name_list
        addr_list << @addresses[name]
    end
    id = @current_actor.node.exec 'wallet_multisig_get_balance_id', req, addr_list
    @addresses ||= {}
    @addresses[name] = id
end

Then(/^Balance with ID (\w+) should have (\d+) (\w+)$/) do |id, amount, symbol|
    bal = @current_actor.node.exec 'blockchain_get_balance', id
    print_json bal
end
